@if (tutorialService.isShowing() && tutorialService.tutorial(); as tutorial) {
  <div class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in" (click)="tutorialService.hide()">
    <div class="bg-gray-900 border-2 border-green-500/50 shadow-lg shadow-green-500/10 rounded-lg max-w-2xl w-full m-4 max-h-[80vh] flex flex-col animate-slide-up" (click)="$event.stopPropagation()">
      
      <!-- Header -->
      <header class="flex justify-between items-center p-4 border-b border-green-900/50">
        <h2 class="text-2xl font-bold text-green-400 flex items-center">
          <i class="fas fa-graduation-cap mr-3"></i>{{ tutorial.title }}
        </h2>
        <button (click)="tutorialService.hide()" class="text-gray-400 hover:text-white transition-colors">
          <i class="fas fa-times text-2xl"></i>
        </button>
      </header>

      <!-- Content -->
      <div class="p-6 overflow-y-auto">
        <div class="space-y-6">
          @for (step of tutorial.steps; track $index) {
            <div class="flex items-start">
              <div class="flex-shrink-0 flex flex-col items-center mr-4">
                <div class="w-10 h-10 rounded-full bg-green-800/50 border border-green-500 flex items-center justify-center font-bold text-green-300 text-lg">
                  {{ $index + 1 }}
                </div>
                @if (!$last) {
                  <div class="w-px h-12 bg-green-900/70 mt-2"></div>
                }
              </div>
              <div>
                <h3 class="text-xl font-semibold text-green-300">{{ step.title }}</h3>
                <p class="text-green-400/90 mt-1">{{ step.content }}</p>
              </div>
            </div>
          }
        </div>
      </div>

       <!-- Footer -->
       <footer class="p-4 mt-auto border-t border-green-900/50 text-right">
        <button (click)="tutorialService.hide()" class="px-6 py-2 bg-green-600 hover:bg-green-500 text-gray-900 font-bold rounded transition-all duration-200">
          Got It!
        </button>
      </footer>

    </div>
  </div>
}

<style>
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
  }
  @keyframes slide-up {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  .animate-slide-up {
     animation: slide-up 0.3s ease-out forwards;
  }
</style>
