<div class="flex flex-col h-full">
  <header class="mb-6">
    <h2 class="text-3xl font-bold text-green-400">My IP Address</h2>
    <p class="text-green-600 mt-1">Discover your public IP address and geolocation information.</p>
  </header>

  <div class="bg-gray-800/50 border border-green-900/70 rounded-lg p-6 max-w-2xl mx-auto w-full">
    @if (isLoading()) {
      <div class="text-center py-8">
        <i class="fas fa-spinner fa-spin text-4xl text-green-500"></i>
        <p class="mt-4 text-lg text-green-400 animate-pulse">Fetching your IP information...</p>
      </div>
    } @else if (error()) {
      <div class="text-center py-8 bg-red-900/30 border border-red-500/50 rounded-lg p-4">
        <i class="fas fa-exclamation-triangle text-4xl text-red-400"></i>
        <p class="mt-4 text-lg text-red-300">An Error Occurred</p>
        <p class="mt-2 text-red-400/80">{{ error() }}</p>
         <button (click)="fetchIpInfo()" class="mt-4 px-4 py-2 bg-green-600 hover:bg-green-500 text-gray-900 font-bold rounded">
            <i class="fas fa-redo mr-2"></i>Try Again
        </button>
      </div>
    } @else if (ipInfo(); as info) {
      <div class="animate-fade-in">
        <div class="text-center border-b border-green-900/50 pb-4">
          <p class="text-lg text-green-400">Your Public IP Address is</p>
          <div class="flex items-center justify-center gap-4 my-2">
            <p class="text-4xl lg:text-5xl font-bold text-white font-mono tracking-wider">{{ info.ip }}</p>
            <button (click)="copyIp()" class="px-3 py-1 bg-gray-700 hover:bg-green-800 text-green-300 rounded-md text-sm font-semibold transition-colors">
              <i class="fas fa-copy mr-2"></i>{{ copyButtonText() }}
            </button>
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4 text-lg">
          <div class="flex items-center">
            <i class="fas fa-map-marker-alt w-6 text-center text-green-500 mr-3"></i>
            <span class="text-green-300">{{ info.city }}, {{ info.region }}, {{ info.country_name }}</span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-satellite-dish w-6 text-center text-green-500 mr-3"></i>
            <span class="text-green-300">{{ info.org }}</span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-globe w-6 text-center text-green-500 mr-3"></i>
            <span class="text-green-300">Timezone: {{ info.timezone }}</span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-network-wired w-6 text-center text-green-500 mr-3"></i>
            <span class="text-green-300">ASN: {{ info.asn }}</span>
          </div>
        </div>
        <div class="text-center mt-6">
            <a [href]="'https://www.google.com/maps?q=' + info.latitude + ',' + info.longitude" target="_blank" class="text-blue-400 hover:text-blue-300 underline">
                View on Google Maps <i class="fas fa-external-link-alt text-xs ml-1"></i>
            </a>
        </div>
      </div>
    }
  </div>
</div>