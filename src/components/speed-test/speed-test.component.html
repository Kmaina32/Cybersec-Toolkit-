<div class="flex flex-col h-full">
  <header class="mb-6 flex justify-between items-start">
     <div>
      <h2 class="text-3xl font-bold text-green-400">Internet Speed Test</h2>
      <p class="text-green-600 mt-1">Measure your network's latency, download, and upload speeds.</p>
    </div>
    <button (click)="showTutorial()" class="text-blue-400 hover:text-white font-bold ml-4 px-4 py-2 rounded bg-gray-800/50 border border-blue-500/50">
        <i class="fas fa-question-circle mr-2"></i>Tutorial
    </button>
  </header>

  <div class="flex-grow flex flex-col items-center justify-center">
    <!-- Gauges -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 w-full max-w-4xl mb-8">
      <!-- Ping -->
      <div class="text-center">
        <div class="gauge-container">
            <div class="gauge" style="--rotation: {{ (status() === 'ping' ? ping() : (status() === 'idle' || status() === 'finished' ? ping() : 180)) * 1.8 }}deg;"></div>
            <div class="gauge-value"><span class="value">{{ ping().toFixed(0) }}</span><span class="unit">ms</span></div>
        </div>
        <h3 class="text-xl font-bold text-green-400 mt-2">Ping</h3>
        @if(status() === 'ping') {
           <div class="h-4 text-green-500 animate-pulse">testing...</div>
        } @else {
           <div class="h-4"></div>
        }
      </div>
      <!-- Download -->
      <div class="text-center">
         <div class="gauge-container">
            <div class="gauge" style="--rotation: {{ (status() === 'download' ? downloadSpeed() : (status() === 'upload' || status() === 'finished' ? downloadSpeed() : 0)) * 1.8 }}deg;"></div>
            <div class="gauge-value"><span class="value">{{ downloadSpeed().toFixed(2) }}</span><span class="unit">Mbps</span></div>
        </div>
        <h3 class="text-xl font-bold text-green-400 mt-2">Download</h3>
         @if(status() === 'download') {
           <div class="h-4 text-green-500 animate-pulse">testing...</div>
        } @else {
           <div class="h-4"></div>
        }
      </div>
      <!-- Upload -->
      <div class="text-center">
         <div class="gauge-container">
            <div class="gauge" style="--rotation: {{ (status() === 'upload' ? uploadSpeed() : (status() === 'finished' ? uploadSpeed() : 0)) * 1.8 }}deg;"></div>
            <div class="gauge-value"><span class="value">{{ uploadSpeed().toFixed(2) }}</span><span class="unit">Mbps</span></div>
        </div>
        <h3 class="text-xl font-bold text-green-400 mt-2">Upload</h3>
         @if(status() === 'upload') {
           <div class="h-4 text-green-500 animate-pulse">testing...</div>
        } @else {
           <div class="h-4"></div>
        }
      </div>
    </div>

    <!-- GO Button -->
    <div class="relative w-48 h-48">
      <button 
        (click)="startTest()"
        [disabled]="status() !== 'idle' && status() !== 'finished'"
        class="w-full h-full rounded-full border-4 border-green-700/50 bg-gray-800 text-green-400 text-5xl font-bold
               transition-all duration-300 transform
               hover:border-green-500 hover:bg-green-900/50 hover:text-white hover:scale-105
               disabled:cursor-not-allowed disabled:border-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:hover:scale-100"
        [class]="status() !== 'idle' && status() !== 'finished' ? 'animate-pulse-slow' : ''">
        @if (status() === 'idle') { <span>GO</span> }
        @if (status() === 'finished') { <i class="fas fa-redo"></i> }
        @if (status() !== 'idle' && status() !== 'finished') { <span>...</span> }
      </button>
    </div>
  </div>
  
  <div class="mt-6 bg-yellow-900/50 border border-yellow-500/70 text-yellow-300 text-xs rounded-lg p-3 text-center">
    <p><i class="fas fa-info-circle mr-2"></i><strong>Note:</strong> Upload test is a simulation. Real upload speed measurement requires a dedicated server and is not feasible in this educational browser-based tool.</p>
  </div>
</div>
