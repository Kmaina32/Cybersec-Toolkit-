<div class="flex flex-col h-full">
  <header class="mb-6">
    <h2 class="text-3xl font-bold text-green-400">Digital Forensics Tools</h2>
    <p class="text-green-600 mt-1">Simulate the analysis of digital evidence to uncover traces of a security breach.</p>
  </header>

  <div class="bg-gray-800/50 border border-green-900/70 rounded-lg p-6">
    <h3 class="text-xl font-semibold text-green-300 mb-2">Evidence Analyzer</h3>
    <p class="text-sm text-green-500 mb-4">This tool simulates a forensic analysis of a compromised system's disk image.</p>
    
    <button 
      (click)="startAnalysis()" 
      [disabled]="isAnalyzing()"
      [class]="isAnalyzing() ? 'bg-gray-600 cursor-not-allowed' : 'bg-green-600 hover:bg-green-500'"
      class="w-full sm:w-auto px-8 py-2 text-gray-900 font-bold rounded transition-all duration-200"
    >
      @if (isAnalyzing()) {
        <span><i class="fas fa-spinner fa-spin mr-2"></i>Analyzing...</span>
      } @else {
        <span><i class="fas fa-play mr-2"></i>Analyze Disk Image</span>
      }
    </button>
  </div>

  @if (isAnalyzing() || analysisLog().length > 1) {
    <div class="mt-6 flex-grow bg-black border border-green-900/70 rounded-lg p-4 flex flex-col min-h-[300px]">
      <h3 class="text-xl font-semibold text-green-400 mb-2">Analysis Log</h3>
      <pre class="flex-grow overflow-y-auto text-sm text-green-300/80 space-y-1">@for(line of analysisLog(); track $index){
        @if(line.startsWith('[!]')){
            <p class="whitespace-pre-wrap text-red-400 font-bold">> {{line}}</p>
        } @else if(line.startsWith('[*]')){
            <p class="whitespace-pre-wrap text-yellow-400">> {{line}}</p>
        } @else {
            <p class="whitespace-pre-wrap">> {{line}}</p>
        }
      }</pre>
      @if(analysisComplete()){
        <div class="mt-4 p-3 bg-green-900/50 border border-green-500 rounded-lg text-center">
            <p class="font-bold text-green-300">Analysis Finished</p>
        </div>
      }
    </div>
  }
  
  <div class="mt-6 bg-gray-800/30 border border-green-900/50 rounded-lg p-4">
    <div class="flex flex-wrap gap-4">
      <button (click)="showTutorial()" class="text-blue-400 hover:text-white font-bold">
          <i class="fas fa-question-circle mr-2"></i>Show Tutorial
      </button>
      <button (click)="getExplanation()" class="text-green-400 hover:text-white font-bold">
          <i class="fas fa-book-open mr-2"></i>What are Forensics Tools?
      </button>
    </div>
    @if(isFetchingExplanation()){
      <p class="mt-4 text-green-500 animate-pulse">Asking the AI expert...</p>
    }
    @if(explanation()){
      <p class="mt-4 text-green-400/90 whitespace-pre-wrap">{{ explanation() }}</p>
    }
     @if(geminiService.error()){
      <p class="mt-4 text-red-500">{{ geminiService.error() }}</p>
    }
  </div>

</div>
